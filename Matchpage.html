<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Include Material Design lite framework -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>

    <title>Lughborough Table Tennis Cup</title>
    <link rel="stylesheet" type="text/css" href="CupPage.css">
    <link rel="stylesheet" type="text/css" href="Matchpage.css">

</head>
<body>

<script src="https://unpkg.com/vue/dist/vue.js"></script>  <!-- include vue.js -->

    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
                <!-- Title -->
                <span class="mdl-layout-title">Loughborough Table Tennis Cup</span>
                <!-- Add spacer, to align navigation to the right -->
                <div class="mdl-layout-spacer"></div>
                <!-- Navigation. We hide it in small screens. -->
                <nav class="mdl-navigation mdl-layout--large-screen-only">
                    <a class="mdl-navigation__link" href="NewCup.html">Group stage info</a>
                    <a class="mdl-navigation__link" href="CupPage.html">Playoffs info</a>
                    <a class="mdl-navigation__link" href="">Fixtures</a>
                    <a class="mdl-navigation__link" href="">Teams</a>
                    <a class="mdl-navigation__link" href="login.html">Login</a>
                </nav>
            </div>
        </header>                                                                                                           <!-- FIX ME -->
        <div class="mdl-layout__drawer">
            <span class="mdl-layout-title">Navigation</span>
            <nav class="mdl-navigation">
                <a class="mdl-navigation__link" href="NewCup.html">Group stage info</a>
                <a class="mdl-navigation__link" href="CupPage.html">Playoffs info</a>
                <a class="mdl-navigation__link" href="">Fixtures</a>
                <a class="mdl-navigation__link" href="">Teams</a>
                <a class="mdl-navigation__link" href="login.html">Login</a>
            </nav>
        </div>

    <main class="mdl-layout__content" id="calc">
        <div id="app">
            <p class="date">Date</p>
            <table>                                                                                                     <!-- This is the top table containing the team names and so on-->
                <tr >
                    <td class="cell-border center">Home</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="cell-border center">Away</td>
                </tr>
                <tr>
                    <td class="cell-border title-text">Loughboroug</td>
                    <td class="cell-border title-text">3</td>
                    <td class="cell-border ">VS</td>
                    <td class="cell-border title-text">4</td>
                    <td class="cell-border title-text">Leicester</td>
                </tr>
                <tr >
                    <td class="cell-border center">
                        Gareth <br>
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="cell-border center">
                        Will <br>
                    </td>
                </tr>
            </table>
            <br> <br>
                <!-- This is the second table containing the singles-->
            <table >
                    <!-- this just contains the singles subtitle -->
                <tr>
                    <td><a class="title-text">Singles:</a></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td colspan="2" class="title-text" align="center">Loughborough</td>
                    <td></td>
                    <td>Home</td>
                    <td>Away</td>
                </tr>
                <tr >
                    <td ></td>
                    <td></td>
                    <td align="center">  Gareth Liughing </td>
                    <td align="center">  Riccardo boscherini</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td rowspan="2" > Leicester</td>
                    <td> Player 1</td>

                    <!-- Match 1:  player 1 VS player 1-->
                    <td>

                        <table class="game-table" >
                            <tr><td class="e"></td><td class="t" align="right">{{m1g1h}}</td></tr>
                            <tr><td class="b" align="left">{{m1g1a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right" >{{m1g2h}}</td></tr>
                            <tr><td class="b" align="left">{{m1g2a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m1g3h}}</td></tr>
                            <tr><td class="b" align="left">{{m1g3a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m1g4h}}</td></tr>
                            <tr><td class="b" align="left">{{m1g4a}}</td> <td class="e"></td></tr>
                        </table>

                    </td>
                    <!-- Match 2:  player 2 VS player 1-->
                    <td>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m2g1h}}</td></tr>
                            <tr><td class="b" align="left">{{m2g1a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m2g2h}}</td></tr>
                            <tr><td class="b" align="left">{{m2g2a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right" >{{m2g3h}}</td></tr>
                            <tr><td class="b" align="left">{{m2g3a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right" >{{m2g4h}}</td></tr>
                            <tr><td class="b" align="left" >{{m2g4a}}</td> <td class="e"></td></tr>
                        </table>
                    </td>
                    <td style="width: 20px"></td>
                    <td id="homepart1"></td>
                    <td id="awaypart1"></td>
                </tr>
                <tr >
                    <td>Player 2</td>
                    <!-- Match 3:  player 1 VS player 2-->
                    <td>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right" >{{m3g1h}}</td></tr>
                            <tr><td class="b" align="left">{{m3g1a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m3g2h}}</td></tr>
                            <tr><td class="b" align="left" >{{m3g2a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m3g3h}}</td></tr>
                            <tr><td class="b" align="left">{{m3g3a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m3g4h}}</td></tr>
                            <tr><td class="b" align="left">{{m3g4a}}</td> <td class="e"></td></tr>
                        </table>
                    </td>
                    <!-- Match 4:  player 2 VS player 2-->
                    <td>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m4g1h}}</td></tr>
                            <tr><td class="b" align="left">{{m4g1a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right" >{{m4g2h}}</td></tr>
                            <tr><td class="b" align="left">{{m4g2a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m4g3h}}</td></tr>
                            <tr><td class="b" align="left">{{m4g3a}}</td> <td class="e"></td></tr>
                        </table>
                        <table class="game-table">
                            <tr><td class="e"></td><td class="t" align="right">{{m4g4h}}</td></tr>
                            <tr><td class="b" align="left">{{m4g4a}}</td> <td class="e"></td></tr>
                        </table>
                    </td>
                    <td></td>
                    <td id="homepart2"></td>
                    <td id="awaypart2"></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td style="text-align: right"><br>Handicap:</td>                                                    <!-- Fix the styling> -->
                    <td></td>
                    <td id="hhandicap"></td>
                    <td id="ahandicap"></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td style="text-align: right"><br>Compensation:</td>                                                <!-- Fix the styling> -->
                    <td></td>
                    <td id="hcompensation"></td>
                    <td id="acompensation"></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td style="text-align: right"><br>Total:</td>                                                <!-- Fix the styling> -->
                    <td></td>
                    <td id="homescore"></td>
                    <td id="awayscore"></td>
                </tr>
            </table>
        </div>
        <div id="calc">
            <button v-on:click="addup">Execute</button>

        </div>
        <div id="calc">
            <button v-on:click="fetchscore">Execute</button>

        </div>
        <script>



            var tallier = new Vue({
                el: '#calc',
                data: {
                    homescore: 0,
                    awayscore: 0,
                    hhandicap:0,
                    ahandicap:0,
                    hcompensation:0,
                    acompensation:0,

                    m1g1h: 11,
                    m1g1a: 2,
                    m1g2h: 5,
                    m1g2a: 3,
                    m1g3h: 3,
                    m1g3a: 6,
                    m1g4h: 9,
                    m1g4a: 3,

                    m2g1h: 11,
                    m2g1a: 2,
                    m2g2h: 0,
                    m2g2a: 11,
                    m2g3h: 3,
                    m2g3a: 1,
                    m2g4h: 11,
                    m2g4a: 3,

                    m3g1h: 11,
                    m3g1a: 2,
                    m3g2h: 0,
                    m3g2a: 11,
                    m3g3h: 3,
                    m3g3a: 0,
                    m3g4h: 11,
                    m3g4a: 3,

                    m4g1h: 11,
                    m4g1a: 2,
                    m4g2h: 0,
                    m4g2a: 0,
                    m4g3h: 11,
                    m4g3a: 0,
                    m4g4h: 11,
                    m4g4a: 3
                },

                methods: {
                    addup: function () {




                        var x =0;
                        var homescore1 = this.m1g1h + this.m1g2h + this.m1g3h + this.m1g4h + this.m2g1h + this.m2g2h + this.m2g3h + this.m2g4h;
                        var awayscore1 = this.m1g1a + this.m1g2a + this.m1g3a + this.m1g4a + this.m2g1a + this.m2g2a + this.m2g3a + this.m2g4a;
                        var homescore2 = this.m3g1h + this.m3g2h + this.m3g3h + this.m3g4h + this.m4g1h + this.m4g2h + this.m4g3h + this.m4g4h;
                        var awayscore2 = this.m3g1a + this.m3g2a + this.m3g3a + this.m3g4a + this.m4g1a + this.m4g2a + this.m4g3a + this.m4g4a;



                        document.getElementById("homepart1").innerHTML=homescore1;
                        document.getElementById("awaypart1").innerHTML=awayscore1;
                        document.getElementById("homepart2").innerHTML=homescore2;
                        document.getElementById("awaypart2").innerHTML=awayscore2;


                        this.homescore = homescore1 + homescore2;
                        document.getElementById("homescore").innerHTML=this.homescore;
                        this.awayscore = awayscore1 + awayscore2;

                        //YOU NEED TO SET THE HANDICAP HERE                                                             //YOU NEED TO SET THE HANDICAP HERE

                        alert('Hello ' + homescore1 + '!');
                        // `event` is the native DOM event
                    },

                    scorefetch: function (data) {

                        var xhttp = new XMLHttpRequest();
                        xhttp.onreadystatechange = function() {                                                         //(callback function)this function runs after xhttp.open because we have asynchronous data sending so as soon as the data is recieved this is run
                            if (xhttp.readyState === XMLHttpRequest.DONE && xhttp.status == 200) {
                                                                                                                        //here I manipulate the data received
                                console.log(this.responseText);                                                         //raw data received is posted for debugging purposes
                                tallier.scoreparser(this.responseText);
                            }
                        };

                        xhttp.open("GET", "http://localhost:3030/matches", true);
                        xhttp.send();


                    },
                    scoreparser: function (rawdata) {

                        var data =  rawdata;
                        var json = JSON.parse(data);                                                                    //parse json data
                        console.log(json.id);


                        this.m1g1a = json.id;
                    }
                }
            })

        </script>

    </main>

</div>
</body>
</html>

